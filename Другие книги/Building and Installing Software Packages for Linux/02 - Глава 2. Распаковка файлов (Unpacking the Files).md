Вы скачали или иным способом получили программный пакет. Скорее всего, он заархивирован (`tar`) и сжат (`gzip`), в форме `.tar.gz` или `.tgz` (известной как «тарбол»). Сначала скопируйте его в рабочий каталог. Затем распакуйте и разархивируйте его. Соответствующая команда для этого — `tar xzvf имя_файла`, где `имя_файла` — это, конечно, название файла пакета.

Процесс разархивации обычно поместит соответствующие файлы в создаваемые им подкаталоги. Обратите внимание, что если имя пакета имеет суффикс `.Z`, то описанная выше процедура также сработает, хотя выполнение `uncompress`, а затем `tar xvf` тоже работает. Вы можете предварительно просмотреть содержимое архива с помощью `tar tzvf имя_файла`, который выведет список файлов в архиве, не распаковывая их.

Описанный выше метод распаковки «тарболов» эквивалентен любой из следующих команд:

```text
gzip -cd имя_файла | tar xvf -
gunzip -c имя_файла | tar xvf -
```

(Символ `-` заставляет команду `tar` принимать ввод из стандартного потока

Исходные файлы в новом формате `bzip2` (`.bz2`) могут быть распакованы с помощью `bzip2 -cd имя_файла | tar xvf -` или, проще, с помощью `tar xyvf имя_файла`, при условии, что `tar` был соответствующим образом исправлен (подробности см. в HOWTO по Bzip2). В Debian Linux используется другой патч для `tar`, написанный Hiroshi Takekawa, так что опции `-I`, `--bzip2`, `--bunzip2` работают в этой конкретной версии `tar`.

Иногда заархивированный файл должен быть распакован и установлен из домашнего каталога пользователя или, возможно, из определенного другого каталога, такого как `/`, `/usr/src` или `/opt`, как указано в информации о конфигурации пакета. Если при попытке распаковки вы получите сообщение об ошибке, возможно, это и есть причина. Прочтите документацию к пакету, особенно файлы `README` и/или `Install`, если они есть, и при необходимости отредактируйте конфигурационные файлы и/или `Makefile` в соответствии с инструкциями по установке. Обратите внимание, что обычно вы не должны изменять файл `Imake`, так как это может иметь непредвиденные последствия. Большинство программных пакетов позволяют автоматизировать этот процесс, запустив `make install` для размещения двоичных файлов в соответствующих системных областях.

Вы можете столкнуться с файлами `shar` (shell archives), особенно в телеконференциях Usenet, посвященных исходному коду. Они до сих пор используются, потому что читаемы человеком, что позволяет модераторам новостных групп просматривать их и отвергать неподходящие. Их можно распаковать командой `unshar имя_файла.shar`. В остальном процедура работы с ними такая же, как и с «тарболами».

Некоторые архивы исходного кода обработаны с помощью нестандартных утилит сжатия для DOS, Mac или даже Amiga, таких как `zip`, `arc`, `lha`, `arj`, `zoo`, `rar` и `shk`. К счастью, на Sunsite и других ресурсах есть утилиты распаковки для Linux, которые могут работать с большинством или всеми из них.

Иногда вам может потребоваться обновить или включить исправления ошибок в распакованные исходные файлы с помощью файла исправлений (`patch` или `diff`), который содержит список изменений. Файлы документации и/или файл `README` сообщат вам, если это необходимо. Обычный синтаксис для вызова мощной утилиты исправлений Ларри Уолла — `patch < файл_исправлений`.

Теперь вы можете перейти к этапу сборки процесса.

---
[[Навигация по книге «Building and Installing Software Packages for Linux»]]

### Зачем вам это нужно? Развёрнутые пояснения

Эта глава кажется технической и рутинной, но она **закладывает фундамент дисциплины и внимания к деталям**, без которых успех в LFS невозможен. Это не просто про распаковку — это про **правильное начало работы с исходным кодом**.

**1. Первый контакт с пакетом: дисциплина и порядок.**

- **Рабочий каталог:** Важнейшая привычка. Никогда не распаковывайте и не собирайте пакеты в произвольных местах (например, прямо в `~/Загрузки`). Создайте четкую структуру (например, `~/src/`). В LFS вы будете работать в строго определенном каталоге (`$LFS/sources`), и привычка к порядку предотвратит хаос.

- **Просмотр содержимого (`tar tzvf`):** Это ваша «разведка». Перед распаковкой вы видите:

    - Будет ли создан подкаталог или файлы «вывалятся» в текущий? (Это критично!)
    
    - Есть ли там файлы `README`, `INSTALL`?
    
    - Какова общая структура пакета?
    
    - **В LFS:** Это сэкономит вам часы, если что-то пойдет не так. Вы всегда сможете проверить, что было распаковано.


**2. Понимание форматов и инструментов — признак компетентности.**

- Знание разницы между `gzip` (`.gz`) и `bzip2` (`.bz2`), `xz` (`.xz`) и умение с ними работать — это базовый навык. В мире исходных кодов `tar.xz` встречается не реже, чем `tar.gz`.

- **Универсальная команда для современных архивов:** Сегодня часто используют `tar xf имя_файла`. Флаг `f` обязателен (указание файла), а `tar` сам определяет тип компрессии по суффиксу. Но понимание «старых» форм (`xzvf`, `xjvf`) помогает читать документацию и чужие скрипты.

- **Исторический контекст (shar, arc, zoo):** Автор упоминает их не просто так. Это урок: мир ПО разнообразен, и вы должны быть готовы к нестандартным форматам. В LFS вы будете иметь дело только со стандартными тарболами, но в будущем это знание может пригодиться.

**3. Самая важная мысль главы: ЧИТАЙТЕ ДОКУМЕНТАЦИЮ.**

- Фразы «прочтите README», «редактируйте в соответствии с инструкциями» — это **золотые правила**. 90% проблем новичков решаются внимательным чтением этих файлов.

- **Что искать в README/INSTALL:**

    - **Требования к зависимостям (Dependencies):** Какие библиотеки и инструменты должны быть установлены ДО начала сборки.
    
    - **Особые опции configure:** Возможно, для корректной работы пакета нужны специфичные флаги.
    
    - **Пути установки:** Пакет может предполагать установку в `/opt` или `/usr/local`. В LFS вы будете строго контролировать это, но для сборки пакетов в своей основной системе это важно.

- **В LFS:** Книга LFS — это и есть ваш главный `README`. Но для каждого пакета также существуют свои собственные инструкции. Умение находить и интерпретировать их — ключевой навык.

**4. Работа с патчами (`patch`).**

- **Что это:** `patch` — это файл, содержащий _разницу_ между старой и новой версией исходного кода. Это элегантный способ применять исправления, не перекачивая весь архив заново.

- **Почему это важно для LFS:** В LFS вы **активно будете использовать патчи**. Некоторые пакеты требуют исправлений для корректной сборки в минимальной среде LFS. Вы будете выполнять команду `patch -p1 < ...` регулярно. Понимание того, что делает эта утилита (применяет изменения из файла `diff`), принципиально важно.

**5. Автоматизация (`make install`).**

- Автор упоминает об этом в конце. `make install` — это финальная команда, которая копирует скомпилированные программы, библиотеки и заголовочные файлы в системные каталоги (`/usr/bin`, `/usr/lib` и т.д.).

- **Критически важный момент для LFS:** Вы должны понимать, что `make install` — это действие, **меняющее систему**. В обычной системе это требует прав суперпользователя (`sudo`). В LFS вы будете делать это, находясь в контролируемом окружении (`chroot`), чтобы не повредить хост-систему.

**Практический совет для тренировки перед LFS:**

1. Возьмите любой тарбол с исходниками (например, `wget-1.21.4.tar.gz`).

2. Создайте каталог `~/practice_src` и перейдите в него.

3. Выполните `tar tzvf путь_к_тарболу` и изучите вывод.

4. Распакуйте: `tar xzvf путь_к_тарболу`.

5. Перейдите в созданный подкаталог и найдите файлы `README`, `INSTALL`. Попробуйте их прочитать (даже если они большие, просмотрите оглавление).

6. Попробуйте распаковать архив с другим сжатием (например, `.tar.bz2`).

**Итог главы:** Распаковка — это не просто `tar xzf`. Это **первый этап взаимодействия с пакетом**, который задает тон всей дальнейшей работе. Аккуратность, привычка проверять содержимое и обязательно читать документацию — это те навыки, которые защитят вас от множества ошибок в долгом и сложном процессе сборки LFS. Вы учитесь быть системным инженером, а не просто исполнителем команд.